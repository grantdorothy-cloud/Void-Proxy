<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Void â€” Web Proxy</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=DM+Mono:wght@300;400;500&family=Syne:wght@400;700;800&display=swap" rel="stylesheet">

<!-- Scramjet stack â€” served by the Node backend from node_modules -->
<script src="/baremux/bare.cjs"></script>
<script src="/libcurl/index.js"></script>
<script src="/scram/scramjet.all.js"></script>

<style>
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
:root {
  --bg: #0a0a0f;
  --surface: #111118;
  --surface2: #1a1a24;
  --border: #252535;
  --border2: #2e2e42;
  --accent: #7c6aff;
  --accent2: #ff6a9e;
  --accent-dim: rgba(124,106,255,0.15);
  --text: #e4e4f0;
  --text2: #9898b8;
  --muted: #555570;
  --green: #3dd68c;
  --yellow: #f5c542;
  --red: #f26d6d;
}
html, body { height: 100%; background: var(--bg); color: var(--text); font-family: 'DM Mono', monospace; overflow: hidden; }

/* Subtle noise grain */
body::after {
  content: ''; position: fixed; inset: 0; pointer-events: none; z-index: 9998; opacity: 0.025;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='300'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='300' height='300' filter='url(%23n)'/%3E%3C/svg%3E");
}

.app { display: flex; flex-direction: column; height: 100vh; }

/* â”€â”€ TOP BAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.topbar {
  display: flex; align-items: center; gap: 8px;
  padding: 7px 12px; background: var(--surface);
  border-bottom: 1px solid var(--border);
  flex-shrink: 0;
}
.logo {
  font-family: 'Syne', sans-serif; font-weight: 800; font-size: 16px;
  letter-spacing: -1px; white-space: nowrap; user-select: none;
  background: linear-gradient(130deg, var(--accent) 0%, var(--accent2) 100%);
  -webkit-background-clip: text; -webkit-text-fill-color: transparent;
  min-width: 36px;
}
.sep { width: 1px; height: 20px; background: var(--border2); flex-shrink: 0; }

.nav-btn {
  display: flex; align-items: center; justify-content: center;
  width: 28px; height: 28px; border: none; background: none;
  color: var(--muted); cursor: pointer; border-radius: 6px; flex-shrink: 0;
  transition: color .12s, background .12s;
}
.nav-btn:hover:not(:disabled) { color: var(--text); background: var(--surface2); }
.nav-btn:disabled { opacity: 0.22; cursor: default; }
.nav-btn svg { width: 14px; height: 14px; }

/* URL bar */
.url-wrap { flex: 1; position: relative; display: flex; align-items: center; min-width: 0; }
.url-icon {
  position: absolute; left: 10px; pointer-events: none;
  display: flex; align-items: center;
}
.url-icon svg { width: 13px; height: 13px; }
.icon-search { color: var(--muted); }
.icon-lock   { color: var(--green); display: none; }

.url-input {
  width: 100%; height: 32px; padding: 0 64px 0 32px;
  background: var(--surface2); border: 1px solid var(--border2);
  border-radius: 8px; color: var(--text); font-family: 'DM Mono', monospace;
  font-size: 12px; outline: none;
  transition: border-color .2s, box-shadow .2s;
}
.url-input:focus {
  border-color: var(--accent);
  box-shadow: 0 0 0 3px rgba(124,106,255,0.18);
}
.url-input::placeholder { color: var(--muted); }

.btn-go {
  position: absolute; right: 4px; height: 23px; padding: 0 10px;
  background: linear-gradient(135deg, var(--accent), #5040d8);
  border: none; border-radius: 5px; color: #fff;
  font-family: 'Syne', sans-serif; font-size: 10px; font-weight: 700;
  letter-spacing: .6px; cursor: pointer;
  transition: opacity .12s, transform .1s;
}
.btn-go:hover  { opacity: .88; }
.btn-go:active { transform: scale(.96); }

/* â”€â”€ STATUS BAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.statusbar {
  display: flex; align-items: center; gap: 7px;
  padding: 0 12px; background: var(--surface);
  border-bottom: 1px solid var(--border);
  flex-shrink: 0; height: 24px;
  font-size: 10px; color: var(--muted);
}
.dot {
  width: 6px; height: 6px; border-radius: 50%; flex-shrink: 0;
  background: var(--muted); transition: background .3s;
}
.dot.ok   { background: var(--green); box-shadow: 0 0 4px rgba(61,214,140,.5); }
.dot.busy { background: var(--yellow); animation: blink .8s infinite; }
.dot.err  { background: var(--red); }
@keyframes blink { 0%,100%{opacity:1} 50%{opacity:.25} }
.status-txt { overflow: hidden; white-space: nowrap; text-overflow: ellipsis; flex: 1; }

/* â”€â”€ CONTENT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.content { flex: 1; position: relative; overflow: hidden; }

/* HOME */
.home {
  position: absolute; inset: 0; z-index: 2;
  display: flex; flex-direction: column;
  align-items: center; justify-content: center;
  gap: 28px; background: var(--bg); padding: 40px;
  transition: opacity .2s;
}
.home.hidden { opacity: 0; pointer-events: none; }

.home-title {
  font-family: 'Syne', sans-serif;
  font-size: clamp(36px, 6.5vw, 66px);
  font-weight: 800; line-height: .9; letter-spacing: -3px;
  text-align: center;
  background: linear-gradient(150deg, var(--text) 0%, var(--muted) 100%);
  -webkit-background-clip: text; -webkit-text-fill-color: transparent;
  margin-bottom: 8px;
}
.home-title em {
  font-style: normal;
  background: linear-gradient(130deg, var(--accent), var(--accent2));
  -webkit-background-clip: text; -webkit-text-fill-color: transparent;
}
.home-sub { color: var(--muted); font-size: 11px; letter-spacing: .3px; text-align: center; }

/* Init status pill */
.pill {
  display: inline-flex; align-items: center; gap: 7px;
  padding: 6px 13px; border-radius: 20px; font-size: 10.5px;
  border: 1px solid var(--border2); background: var(--surface);
  transition: border-color .3s, color .3s;
}
.pill .dot { width: 5px; height: 5px; }
.pill.ok   { border-color: rgba(61,214,140,.4); color: var(--green); }
.pill.busy { border-color: rgba(245,197,66,.3); color: var(--yellow); }
.pill.err  { border-color: rgba(242,109,109,.4); color: var(--red); }

/* Quick links grid */
.quicklinks { display: grid; grid-template-columns: repeat(auto-fit,minmax(100px,1fr)); gap: 8px; width: 100%; max-width: 560px; }
.ql {
  display: flex; flex-direction: column; align-items: center; gap: 6px;
  padding: 12px 8px; background: var(--surface); border: 1px solid var(--border);
  border-radius: 9px; cursor: pointer; text-decoration: none; color: var(--text2);
  font-size: 10.5px; transition: border-color .18s, background .18s, transform .15s;
}
.ql:hover { border-color: var(--accent); background: var(--surface2); color: var(--text); transform: translateY(-2px); }
.ql-ico { width: 26px; height: 26px; border-radius: 6px; background: var(--surface2); display: flex; align-items: center; justify-content: center; font-size: 13px; }

/* Info box */
.infobox {
  display: flex; align-items: flex-start; gap: 9px;
  padding: 10px 13px; background: var(--surface); border: 1px solid var(--border);
  border-radius: 9px; font-size: 10.5px; color: var(--muted);
  max-width: 560px; width: 100%; line-height: 1.6;
}
.infobox svg { width: 13px; height: 13px; flex-shrink: 0; margin-top: 1px; color: var(--accent); }

/* IFRAME */
#frame {
  position: absolute; inset: 0; width: 100%; height: 100%;
  border: none; background: #fff; z-index: 1;
}

/* LOADING OVERLAY */
.loader {
  position: absolute; inset: 0; background: var(--bg);
  display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 12px;
  z-index: 3; opacity: 0; pointer-events: none; transition: opacity .18s;
}
.loader.on { opacity: 1; pointer-events: all; }
.spinner { width: 30px; height: 30px; border: 2px solid var(--border2); border-top-color: var(--accent); border-radius: 50%; animation: spin .65s linear infinite; }
@keyframes spin { to { transform: rotate(360deg); } }
.load-a { font-size: 11px; color: var(--text2); }
.load-b { font-size: 10px; color: var(--muted); margin-top: -6px; }

/* ERROR SCREEN */
.errscr {
  position: absolute; inset: 0; background: var(--bg);
  display: flex; flex-direction: column; align-items: center; justify-content: center;
  gap: 12px; z-index: 4; opacity: 0; pointer-events: none;
  transition: opacity .18s; padding: 40px; text-align: center;
}
.errscr.on { opacity: 1; pointer-events: all; }
.err-num { font-family: 'Syne', sans-serif; font-size: 56px; font-weight: 800; color: var(--accent2); opacity: .18; line-height: 1; }
.err-head { font-family: 'Syne', sans-serif; font-size: 16px; font-weight: 700; }
.err-body { color: var(--muted); font-size: 11px; max-width: 380px; line-height: 1.7; }
.btn-row { display: flex; gap: 7px; flex-wrap: wrap; justify-content: center; }
.ebtn {
  height: 28px; padding: 0 13px; background: var(--surface2);
  border: 1px solid var(--border2); border-radius: 6px; color: var(--text2);
  font-family: 'DM Mono', monospace; font-size: 10.5px; cursor: pointer;
  transition: border-color .14s, color .14s;
}
.ebtn:hover { border-color: var(--accent); color: var(--text); }

::-webkit-scrollbar { width: 4px; }
::-webkit-scrollbar-track { background: var(--bg); }
::-webkit-scrollbar-thumb { background: var(--border2); border-radius: 2px; }
</style>
</head>
<body>
<div class="app">

  <!-- TOP BAR -->
  <div class="topbar">
    <div class="logo">void.</div>
    <div class="sep"></div>

    <button class="nav-btn" id="bb" disabled title="Back">
      <svg fill="none" stroke="currentColor" stroke-width="2.2" viewBox="0 0 24 24"><path d="M19 12H5M12 5l-7 7 7 7"/></svg>
    </button>
    <button class="nav-btn" id="bf" disabled title="Forward">
      <svg fill="none" stroke="currentColor" stroke-width="2.2" viewBox="0 0 24 24"><path d="M5 12h14M12 19l7-7-7-7"/></svg>
    </button>
    <button class="nav-btn" id="br" title="Refresh / Stop">
      <svg id="ir" fill="none" stroke="currentColor" stroke-width="2.2" viewBox="0 0 24 24"><path d="M4 4v5h5"/><path d="M20 20v-5h-5"/><path d="M4 9a9 9 0 0 1 15-4.243M20 15a9 9 0 0 1-15 4.243"/></svg>
      <svg id="is" fill="none" stroke="currentColor" stroke-width="2.2" viewBox="0 0 24 24" style="display:none"><rect x="6" y="6" width="12" height="12" rx="1.5"/></svg>
    </button>
    <button class="nav-btn" id="bh" title="Home">
      <svg fill="none" stroke="currentColor" stroke-width="2.2" viewBox="0 0 24 24"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9,22 9,12 15,12 15,22"/></svg>
    </button>

    <div class="sep"></div>

    <div class="url-wrap">
      <span class="url-icon">
        <svg class="icon-search" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>
        <svg class="icon-lock"   fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
      </span>
      <input class="url-input" id="url" type="text" placeholder="Search or enter a URLâ€¦" autocomplete="off" spellcheck="false"/>
      <button class="btn-go" id="go">GO</button>
    </div>
  </div>

  <!-- STATUS BAR -->
  <div class="statusbar">
    <div class="dot" id="sdot"></div>
    <span class="status-txt" id="stxt">Initializing Scramjetâ€¦</span>
  </div>

  <!-- CONTENT -->
  <div class="content">

    <!-- HOME -->
    <div class="home" id="home">
      <div>
        <div class="home-title">browse <em>free.</em></div>
        <div class="home-sub">scramjet service worker Â· libcurl transport Â· full js support</div>
      </div>

      <div class="pill busy" id="pill">
        <div class="dot"></div>
        <span id="pilltxt">Starting upâ€¦</span>
      </div>

      <div class="quicklinks">
        <a class="ql" data-url="https://www.google.com">     <div class="ql-ico">ğŸ”</div>Google</a>
        <a class="ql" data-url="https://www.youtube.com">    <div class="ql-ico">â–¶ï¸</div>YouTube</a>
        <a class="ql" data-url="https://www.wikipedia.org">  <div class="ql-ico">ğŸ“–</div>Wikipedia</a>
        <a class="ql" data-url="https://news.ycombinator.com"><div class="ql-ico">ğŸ”¶</div>HN</a>
        <a class="ql" data-url="https://www.reddit.com">     <div class="ql-ico">ğŸ¤–</div>Reddit</a>
        <a class="ql" data-url="https://github.com">         <div class="ql-ico">ğŸ™</div>GitHub</a>
        <a class="ql" data-url="https://discord.com/app">   <div class="ql-ico">ğŸ’¬</div>Discord</a>
        <a class="ql" data-url="https://www.twitch.tv">      <div class="ql-ico">ğŸŸ£</div>Twitch</a>
        <a class="ql" data-url="https://www.spotify.com">    <div class="ql-ico">ğŸµ</div>Spotify</a>
        <a class="ql" data-url="https://stackoverflow.com">  <div class="ql-ico">ğŸ“š</div>Stack OF</a>
      </div>

      <div class="infobox">
        <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M12 8v4M12 16h.01"/></svg>
        <span><strong>Scramjet</strong> is a full service-worker proxy â€” it intercepts and rewrites all page JS, CSS, and network requests, giving near-native support for most sites including YouTube, Discord, Spotify, Reddit, and more.</span>
      </div>
    </div>

    <iframe id="frame" style="display:none"
      allow="fullscreen; autoplay; clipboard-read; clipboard-write; microphone; camera"></iframe>

    <!-- Loading overlay -->
    <div class="loader" id="loader">
      <div class="spinner"></div>
      <div class="load-a" id="la">Loadingâ€¦</div>
      <div class="load-b" id="lb"></div>
    </div>

    <!-- Error screen -->
    <div class="errscr" id="errscr">
      <div class="err-num">ERR</div>
      <div class="err-head">Something went wrong</div>
      <div class="err-body" id="errbody">Could not load this page.</div>
      <div class="btn-row">
        <button class="ebtn" id="enewtab">Open directly â†—</button>
        <button class="ebtn" id="eretry">Retry</button>
        <button class="ebtn" onclick="goHome()">â† Home</button>
      </div>
    </div>

  </div>
</div>

<script>
// â”€â”€ Config â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const SJ_PREFIX    = "/scram/service/";
const SJ_FILES     = {
  wasm: "/scram/scramjet.wasm.wasm",
  all:  "/scram/scramjet.all.js",
  sync: "/scram/scramjet.sync.js",
};
const BAREMUX_WORKER = "/baremux/worker.js";
const LIBCURL_TRANSPORT = "/libcurl/index.mjs";
// Wisp server is hosted by our own backend
const WISP_URL = (location.protocol === "https:" ? "wss://" : "ws://") + location.host + "/wisp/";

// â”€â”€ State â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let sjReady = false, loading = false;
let hist = [], hi = -1, curUrl = "";

// â”€â”€ Elements â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const $ = id => document.getElementById(id);
const urlEl   = $("url");
const frame   = $("frame");
const homeEl  = $("home");
const loaderEl= $("loader");
const la      = $("la"), lb = $("lb");
const errscrEl= $("errscr");
const errbody = $("errbody");
const sdot    = $("sdot");
const stxt    = $("stxt");
const pill    = $("pill");
const pilltxt = $("pilltxt");
const ir      = $("ir"), is_ = $("is");
const bb      = $("bb"), bf = $("bf");
const iSearch = document.querySelector(".icon-search");
const iLock   = document.querySelector(".icon-lock");

// â”€â”€ Helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function setStatus(s, t) {
  sdot.className = "dot" + (s ? " " + s : "");
  stxt.textContent = t;
}
function setLoader(on, a="", b="") {
  loading = on;
  loaderEl.classList.toggle("on", on);
  ir.style.display = on ? "none" : "";
  is_.style.display = on ? "" : "none";
  if (on) { la.textContent = a; lb.textContent = b; }
}
function updateLock(url) {
  const https = url && url.startsWith("https://");
  iSearch.style.display = https ? "none" : "";
  iLock.style.display   = https ? ""     : "none";
}
function updateNav() {
  bb.disabled = hi <= 0;
  bf.disabled = hi >= hist.length - 1;
}
function norm(raw) {
  raw = raw.trim();
  if (!raw) return null;
  if (/^localhost(:\d+)?(\/|$)/.test(raw)) return "http://" + raw;
  if (/^(\d{1,3}\.){3}\d{1,3}/.test(raw))  return "http://" + raw;
  if (!/^https?:\/\//i.test(raw)) {
    if (/^[a-z0-9-]+(\.[a-z]{2,})+/i.test(raw)) return "https://" + raw;
    return "https://www.google.com/search?q=" + encodeURIComponent(raw);
  }
  return raw;
}
function goHome() {
  homeEl.classList.remove("hidden");
  frame.style.display = "none";
  errscrEl.classList.remove("on");
  setLoader(false);
  urlEl.value = ""; curUrl = "";
  updateLock(""); updateNav();
  setStatus("ok", sjReady ? "Scramjet ready" : "Initializingâ€¦");
}
function showErr(msg) {
  setLoader(false);
  errscrEl.classList.add("on");
  errbody.textContent = msg;
  setStatus("err", msg);
}

// â”€â”€ Scramjet init â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function initScramjet() {
  setStatus("busy", "Registering service workerâ€¦");
  try {
    // Register SW
    await navigator.serviceWorker.register("/sw.js", { scope: "/" });
    await navigator.serviceWorker.ready;

    // Init ScramjetController
    const { ScramjetController } = $scramjetLoadController();
    const sj = new ScramjetController({ prefix: SJ_PREFIX, files: SJ_FILES });
    await sj.init("/sw.js");

    // Init BareMux + libcurl transport
    const conn = new BareMux.BareMuxConnection(BAREMUX_WORKER);
    await conn.setTransport(LIBCURL_TRANSPORT, [{ wisp: WISP_URL }]);

    sjReady = true;
    pill.className = "pill ok";
    pilltxt.textContent = "Scramjet ready â€” full proxy active";
    setStatus("ok", "Scramjet ready");
  } catch(e) {
    console.error("[Void] Init error:", e);
    pill.className = "pill err";
    pilltxt.textContent = "Init failed: " + e.message;
    setStatus("err", "Scramjet init failed â€” is the server running?");
  }
}

// â”€â”€ Navigate â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function navigate(rawUrl, addToHist = true) {
  const url = norm(rawUrl);
  if (!url) return;
  if (!sjReady) { showErr("Scramjet not ready yet. Please wait a moment."); return; }

  curUrl = url;
  urlEl.value = url;
  updateLock(url);
  homeEl.classList.add("hidden");
  errscrEl.classList.remove("on");
  frame.style.display = "block";
  setLoader(true, "Loading via Scramjetâ€¦", url);
  setStatus("busy", url);

  if (addToHist) {
    hist = hist.slice(0, hi + 1);
    hist.push(url);
    hi++;
  }
  updateNav();

  // Scramjet routes the URL through the service worker under SJ_PREFIX
  const proxied = SJ_PREFIX + encodeURIComponent(url);

  frame.onload = () => {
    setLoader(false);
    // Try to read current proxied URL back from frame
    let shown = url;
    try {
      const raw = frame.contentWindow.location.pathname;
      if (raw.startsWith(SJ_PREFIX)) shown = decodeURIComponent(raw.slice(SJ_PREFIX.length));
    } catch {}
    setStatus("ok", shown);
    urlEl.value = shown;
    updateLock(shown);
  };
  frame.onerror = () => showErr("Failed to load via Scramjet.");
  frame.src = proxied;
}

// â”€â”€ Events â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
$("go").addEventListener("click", () => navigate(urlEl.value));
urlEl.addEventListener("keydown", e => { if(e.key === "Enter") navigate(urlEl.value); });
urlEl.addEventListener("focus", () => urlEl.select());

bb.addEventListener("click", () => { if(hi > 0) { hi--; updateNav(); navigate(hist[hi], false); } });
bf.addEventListener("click", () => { if(hi < hist.length-1) { hi++; updateNav(); navigate(hist[hi], false); } });
$("br").addEventListener("click", () => {
  if (loading) { frame.src = ""; setLoader(false); setStatus("ok","Stopped."); }
  else if (hi >= 0) navigate(hist[hi], false);
});
$("bh").addEventListener("click", goHome);

document.querySelectorAll(".ql").forEach(l => {
  l.addEventListener("click", e => { e.preventDefault(); navigate(l.dataset.url); });
});

$("enewtab").onclick = () => window.open(curUrl, "_blank");
$("eretry").onclick  = () => navigate(curUrl, false);

// â”€â”€ Boot â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
if ("serviceWorker" in navigator) {
  initScramjet();
} else {
  pill.className = "pill err";
  pilltxt.textContent = "Service Workers not supported in this browser";
  setStatus("err", "Service Workers not supported â€” use Chrome or Firefox");
}
</script>
</body>
</html>
